DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_country_master`(IN `query` JSON)
begin

declare i_country_name varchar(100);
declare i_short_name varchar(5);
declare i_created_at datetime;
declare i_updated_at datetime;
declare i_status SMALLINT(10);


set i_country_name = JSON_EXTRACT(query,'$.country');
set i_short_name = JSON_EXTRACT(query,'$.country_short_name');
set i_created_at = CAST(jSON_UNQUOTE(JSON_EXTRACT(query,'$.created_at'))as DATETIME);

set i_updated_at = CAST(jSON_UNQUOTE(JSON_EXTRACT(query,'$.updated_at')) as DATETIME);
set i_status = JSON_EXTRACT(query,'$.active');


insert into country_master(country,country_short_name,created_at,updated_at,active) values(i_country_name,i_short_name,i_created_at,i_updated_at,i_status);

end$$
DELIMITER ;

------------------------country master---------------------------
DELIMITER $$
DROP PROCEDURE IF EXISTS `seva_final`.`sp_country_master` $$
CREATE  PROCEDURE `sp_country_master`(countryMaster JSON,statement varchar(30))

begin

declare i_country_name varchar(100);
declare i_short_name varchar(5);
declare i_created_at datetime;
declare i_updated_at datetime;
declare i_created_by varchar(30);
declare i_updated_by varchar(30);
declare i_status SMALLINT(10);

set i_country_name = JSON_EXTRACT(countryMaster,'$.country');
set i_short_name = JSON_EXTRACT(countryMaster,'$.country_short_name');
set i_created_at = CAST(jSON_UNQUOTE(JSON_EXTRACT(countryMaster,'$.created_at'))as DATETIME);
set i_updated_at = CAST(jSON_UNQUOTE(JSON_EXTRACT(countryMaster,'$.updated_at')) as DATETIME);
set i_updated_by = JSON_EXTRACT(countryMaster,'$.updated_by');
set i_created_by = JSON_EXTRACT(countryMaster,'$.created_by');
set i_status = JSON_EXTRACT(countryMaster,'$.active');

	if statement='Insert' then
		insert into country_master(country,country_short_name,created_at,updated_at,created_by,updated_by,active) values(i_country_name,i_short_name,i_created_at,i_updated_at,i_created_by,i_updated_by,i_status);
	elseif statement='Select' then
		select *from country_master;
	
	end if;
	
end$$
DELIMITER ;

call sp_country_master('{"country":"rajesh","country_short_name":"ra1","created_at":"2018-02-15 13:47:00.620","updated_at":"2018-02-15 13:47:00.620","created_by":"Admin","updated_by":"Admin","active":"1"}','Insert');